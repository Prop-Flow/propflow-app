name: CI

on:
  push:
    branches: ["main"]
  pull_request:
    branches: ["main"]

jobs:
  security:
    uses: Prop-Flow/propflow-shared-ops/.github/workflows/security-codeql.yml@v1
    secrets: inherit
    permissions:
      actions: read
      contents: read
      security-events: write

  ci:
    needs: security
    uses: Prop-Flow/propflow-shared-ops/.github/workflows/reusable-ci.yml@v1
    secrets: inherit
    with:
      run-lint: true
      # AI core might not have a Next.js 'build' step unless configured
      run-build: false
